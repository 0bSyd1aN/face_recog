<!DOCTYPE html>
<html>
<head>
    <title>Demokujbfkjgfkj Mock Recognition</title>
</head>
<body>

<h2>Demo Mock Recognition</h2>

<input type="file" id="imageFile">
<button onclick="sendImage()">Recognize</button>

<br><br>
<b>Uploaded Image:</b>
<img id="uploadedPreview" width="200">

<br><br>
<b>Matched Image:</b>
<img id="matchedImage" width="200">

<p id="result"></p>

<script>
function sendImage() {
    let fileInput = document.getElementById("imageFile");
    let file = fileInput.files[0];

    if (!file) {
        alert("Please select an image.");
        return;
    }

    // Preview uploaded
    document.getElementById("uploadedPreview").src = URL.createObjectURL(file);

    let formData = new FormData();
    formData.append("file", file);

    fetch("/recognize", {
        method: "POST",
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        console.log(data);

        if (data.error) {
            document.getElementById("result").innerText = data.error;
            return;
        }

        document.getElementById("result").innerText =
            "Distance: " + data.distance;

        // Load matched image
        document.getElementById("matchedImage").src =
            "static/dataset/" + data.match;
    })
    .catch(err => {
        document.getElementById("result").innerText = "Error: " + err;
    });
}
</script>

</body>
</html>
